# 0. 개요
- Java Dependency 관련 코드 발표 도중 아래의 코드를 보며, 상호간의 의존성을 줄일 수 있다는 토픽에서 벗어난 얘기를 하였다. 
- 어떻게 벗어났는지는 알 수 있었으나, 해당하는 코드에서의 정확한 지식이 없는 것 같아 바로 잡고자 이 글을 작성한다.
- 주제에서 벗어난 얘기를 하게된 코드는 아래와 같다. 정확한 클래스, 변수명은 보안상의 이유로 사용하지 않았다.

```java
public class Service {
  
  private final Repository repository;
  
  @Override
  public Service (Repository repository) {
    this.repository = repository;
  }

}
```

- 위의 코드를 가지고 의존성과 관련된 얘기를 꺼냈다. 필드 주입보다 생성자 주입이 의존성이 약하다. (잘못된 정보, 토론 주제에 벗어난 정보)


# 1. 의존성 주입

## 1.1. 의존성 주입이란?
의존성 주입이란, 외부에서 두 객체 간의 관계를 결정해주는 디자인 패턴으로, 인터페이스를 사이에 둬서 클래스 레벨에서는 의존관계가 고정되지 않도록 하고 런타임 시에 관계를 동적으로 주입하여 유연성을 확보하고 결합도를 낮출 수 있게 해준다.

## 1.2. 의존성 주입이 필요한 이유
```java
public class Store {

    private Pencil pencil;

    public Store() {
        this.pencil = new Pencil();
    }

}
```
위의 코드는 아래의 큰 문제점을 가지고 있다.
- 두개의 클래스가 강하게 결합되어 있음. (결합도가 높음) 
  -> 만약 Pencil 이 아닌 Eraser 를 판매하고자 한다면, Store 클래스의 생성자에 변경이 이뤄져야 한다. 이는 유연성이 떨어진다.
- 객체들의 관계가 아닌 클래스의 관계가 맺어짐.
  -> 해당 클래스가 인터페이스를 구현했다면 인터페이스의 타입(Product) 으로 사용하여 객체간의 관계가 맺어지도록 하여야 한다.


이를 해결하기 위해서는 아래와 같이 개선하도록 한다.

1) 코드를 개선하기 위해서는 우선 인터페이스를 생성하도록 한다.
#### Product 코드
```java
public interface Product {
  // TODO
}
```

#### Pencil 코드
```java
public class Pencil implements Product {
  // TODO
}
```

2) Pencil을 직접 입력받는 것이 아닌 외부에서 Product를 주입받음으로써 결합도를 낮출 수 있다.
```java
public class Store {
    private Product product;
    public Store(Product product) {
        this.product = product;
    }
}
```

3) 이를 통하여 애플리케이션 실행 시점에 필요한 객체(빈)를 생성하며, 의존성이 있는 두 객체를 연결하기 위해 한 객체를 다른 객체로 주입시킬 수 있다.
```java 
public class BeanFactory {

    public void store() {
        // Bean의 생성
        Product pencil = new Pencil();
    
        // 의존성 주입
        Store store = new Store(pencil);
    }
    
}
```

## 1.3. 의존성 주입 방법
의존성 주입에는 3가지 방식이 존재한다.

*1. 생성자 주입 (Constructor Injection)*
*2. 필드 주입 (Field Injection)*
*3. 수정자 주입 (Setter Injection)*

**결론부터 말하지면, 생성자 주입이 가장 좋다.**

## 1.3.1. 필드주입

## 1.3.2. 수정자주입

## 1.3.3. 생성자주입


출처: https://mangkyu.tistory.com/150 [MangKyu's Diary:티스토리]
