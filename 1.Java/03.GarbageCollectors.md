# Garbage Collectors
- 앞서 JVM 메모리 구조에 대하여 다뤘다. 
- 이번에는 이 중 Heap Memory 영역을 정리해주는 Garbage Collectors 에 대하여 알아보자.

## 1. Garbage Collector 란?
- Garbage Collector(이하 GC)는 Heap 메모리 영역의 정리를 위한 장치이다.
- GC는 JVM에서 자동으로 동작하기 때문에, 개발자가 동작할 필요가 없다.
- GC 가 주로 동작하는 대상은 Heap 영역 내의 객체 중에서 참조되지 않은 데이터이다.

###  예제코드 
```java
  public class Main {
    public static void main(String[] args) {
        Person person = new Person("a", "곧 참조되지 않음");
        person = new Person("b", "참조가 유지됨");
        //GC 발생 가정 시점
    }
  }
```
- 앞서 언급한 시점에서 GC가 발생된다면, 어떠한 객체가 메모리에서 해제될까?
- person은 "a"라는 객체를 참조하지만, 곧 "b"라는 객체에 의하여 unreachable 상태가 된다.
- GC는 이러한 unreachable한 객체에 대한 메모리를 해제하는 역할을 한다.

## 2. Garbage Collector 의 구조
- GC는 아래의 그림과 같이 크게 3가지로 이뤄져 있다. (Young 영역, Old 영역, Permanent 영역)
![Alt text](./image/gc.jpg)

### Young 영역 :
- Young 영역은 새로운 객체가 생성되는 곳이다.
- Young 영역은 3가지 부분으로 이뤄져있다. : Eden 1개, Suvivor 2개
- 최근 만들어진 객체는 Eden 영역에 위치하게 된다.
- S0(Survivor0), S1(Survivor1) 중 1개는 온전히 비워진 상태로 대기한다.
- Eden 영역이 가득차게 되면 Minor GC가 일어나게 된다.
#### Minor GC 동작과정 :
  ```
  1. Minor GC가 이뤄진 이후에는 Eden에서 S0 or S1 으로 이동한다.
  2. S0 or S1 중 비워있지 않은 곳의 객체도 반대편 Survivor로 이동시킨다. 
  3. 이로써 한개의 Survivor는 온전히 비워져있는 상태로 존재한다.
  4. Minor GC를 통해 살아남은 객체는 나이를 1살 더 먹게 된다.
  ```
  
### Old 영역 :
- Minor GC를 당해 1살씩 먹은 객체들이 존재하는 곳이다.
- 몇 살 먹은 객체부터 Old로 이동시킬지 설정할 수 있다.
- Old 영역이 꽉차게 되면 Major GC가 일어나게 된다. (Major GC 의 소요시간 >>> Minor GC 의 소요시간)



