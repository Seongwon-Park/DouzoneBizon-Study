# 05. 다형성

## 05-01. 다형성이란?

### 05-01-01. 다형성의 개념
여러 개의 클래스가 1개의 부모 클래스를 상속받을 때, 부모 클래스에서 메서드를 하나 정의하고, 상속받은 클래스에서 재정의하는 경우가 존재한다. 이 때, 각각의 자식 클래스는 부모 클래스를 재정의하였으므로, 매개변수로 넘어온 인스턴스에 따라 각기 다른 메서드를 호출하게 된다. 이를 다형성이라고 한다.

### 05-01-02. 다형성의 장점
하나의 부모 클래스의 큰 틀로부터 여러 가지 종류의 자식 클래스가 추가되는 경우를 가정하자. 이 때, 새로 생성되는 자식 클래스도 부모 클래스를 "상속" 받기만 하면 여러 개의 자식 클래스를 하나의 부모 클래스로 쉽게 관리할 수 있다. 이렇듯 다형성은 프로그램의 확장성을 용이하게 한다. 부모 클래스에서 공통 부분의 메서드를 제공하고, 자식 클래스는 이를 기반한 추가 요소를 덧붙여 구현한다면, 코드의 복잡성도 낮아지고 유지보수성도 좋아지게 된다. 이를 통하여 구조화된 코드의 구현이 가능하다.

### 05-01-03. 항상 다형성을 사용하는 것이 좋을까?
당연하게도 항상 다형성을 사용하는 것은 올바른 접근 방법이 아니다. "IS-A(is a relationship;inheritance) 관계" 라는 용어가 있다. IS-A 관계란 일반적인 개념과 구체적인 개념의 관계이다. 즉, 사람은 포유류이다. 와 같은 관계이다. 상속, 즉 다형성은 이러한 관계를 가질 경우에 사용하는 것이 효과적이다. 상속을 하게 되면 자식 클래스가 부모 클래스에 종속되기 때문에 이질적인 관계에서는 상속을 사용하지 않는 것이 좋다. 즉, 부모 클래스가 자식 클래스를 포괄하는 개념일 경우에 사용하는 것이 좋다.

## 05-02. 다운캐스팅과 Instance Of

### 05-02-01. 다운캐스팅의 개념
다운캐스팅이란 부모 클래스에서 자식 클래스로 형 변환이 되는 것을 의미한다. 그러나 모든 사람은 동물이지만, 모든 동물은 사람이 아니다. 이렇듯 다운캐스팅 과정에서는 형 변환에 앞서 이를 검사하는 과정이 필요하다. 이 때 사용되는 것이 Instance Of 이다.

#### Instance Of 사용 방법
```java
Animal animal = new Human();
if(animal instanceof Human) {    // animal 의 타입이 Human 인지를 검사한다. 
  Human human = (Human) animal;  // animal 을 Human 으로 다운캐스팅한다.
}
```

#### 주의) 만약 instanceof 검사를 하지 않는다면 어떨까?
```java
Animal animal = new Tiger(); // 호랑이 객체를 생성
Human human = (Human) animal // 호랑이 객체를 사람 객체로 캐스팅
```

```
결과 : java.lang.ClassCastException 
결과 해석 : animal 의 형과 Human 의 형이 같기 때문에 컴파일 오류가 발생하지 않는다.
           허나, 해당 코드를 실행하면서 오류가 발생한다.
```
### 05-02-02. 다운캐스팅 이후
당연하게도 다운캐스팅 이후에는 상위 클래스로의 형 변환이 이뤄졌기 때문에, 하위 클래스에서 구현한 메서드를 사용할 수 없으며, 상위 클래스에서 선언된 메서드만을 사용할 수 있다.
