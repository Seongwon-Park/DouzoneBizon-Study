# 2. JVM의 메모리 구조

## 2-1. JVM의 메모리 구조
- JVM의 메모리 구조는 아래와 같이 크게 3 부분으로 나눠져 있다.
- Method Area : 어떠한 클래스가 사용되면 해당 클래스 파일을 읽어서 클래스에 대한 정보를 이 곳에 저장한다.
- Call Stack : 호출 스택은 메서드 작업에 필요한 메모리 공간을 제공한다. 
- Heap : 힙 영역에는 인스턴스가 생성된다.

### 2-1-1. Method Area
- Method Area는 Class Area, Static Area 라고도 불린다.
- 클래스 파일의 바이트 코드가 로드되는 곳이다. 이렇게 바이트 코드가 Method Area 에 올라가는 것을 Class Loading 이라고 한다.
- Class Loading는 이유는 어떠한 메서드가 호출되려면, 그 메소드를 갖고 있는 클래스 파일이 메모리에 로딩되어 있어야 하기 때문이다.
- 따라서 클래스를 실행할 때, .class 파일을 메모리에 로딩하는 것이다.
- Class Loading을 위한 JVM의 로딩 절차는 다음과 같다.

  ```
  1. 어떤 메소드를 호출하는 데에 그 메소드를 가진 클래스 바이트 코드가 로딩된 적 없다.
  2. JVM 은 JRE 라이브러리 폴더에서 해당하는 메소드를 가진 클래스 파일을 찾는다.
  3. 만약, JRE 라이브러리 폴더에 없다면, ClassPath 환경변수에 지정된 폴더에서 해당 클래스를 찾는다.
  4. 찾은 후에 그 클래스 파일이 올바른지 바이트코드를 검증한다.
  5. 올바른 바이트코드라면 메소드 영역으로 "Class Loading"한다.
  6. 클래스 변수를 만들라는 명령어가 있으면 메소드 영역에 그 변수를 준비한다.
  7. 클래스 블록이 있으면 순서대로 그 블록을 실행한다.
  8. 이렇게 한 번의 Class Loading이 이뤄지면, JVM이 종료될 때까지 유지된다.
  ```
